:root{
  --rp-bg-1: rgba(10, 16, 30, .82);
  --rp-bg-2: rgba(6, 9, 16, .90);
  --rp-stroke: rgba(255,255,255,.12);
  --rp-stroke-2: rgba(255,255,255,.18);

  --rp-text: rgba(255,255,255,.92);
  --rp-muted: rgba(255,255,255,.65);

  --rp-accent: #ffd166; /* vàng nhẹ */
  --rp-accent2: #6ea8ff; /* xanh nhẹ */

  --rp-shadow: 0 22px 65px rgba(0,0,0,.55);
  --rp-shadow2: 0 10px 30px rgba(0,0,0,.40);

  --rp-radius: 18px;
  --rp-radius2: 14px;

  --rp-font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

/* Wrapper fixed bottom-right */
.rp-chat{
  position: fixed;
  right: 18px;
  bottom: 18px;
  z-index: 99999;
  width: 360px;
  max-width: calc(100vw - 24px);
  font-family: var(--rp-font);
  color: var(--rp-text);
}

/* Badge */
.rp-chat__badge{
  position: absolute;
  right: -4px;
  bottom: 52px;
  background: rgba(56, 189, 248, .95);
  color: #001018;
  font-weight: 800;
  font-size: 12px;
  padding: 5px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.35);
  box-shadow: 0 10px 24px rgba(0,0,0,.35);
}

/* FAB minimized */
.rp-chat__fab{
  width: 56px;
  height: 56px;
  margin-left: auto;

  border: 1px solid var(--rp-stroke);
  border-radius: 18px;
  cursor: pointer;
  user-select: none;

  color: var(--rp-text);
  box-shadow: var(--rp-shadow2);

  background:
    radial-gradient(120% 120% at 10% 10%, rgba(255,209,102,.22), transparent 40%),
    radial-gradient(120% 120% at 90% 20%, rgba(110,168,255,.20), transparent 45%),
    linear-gradient(180deg, rgba(15, 26, 50, .75), rgba(8, 12, 22, .80));

  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  display: grid;
  place-items: center;
  transition: transform .18s ease, filter .18s ease;
}
.rp-chat__fab:hover{
  transform: translateY(-2px);
  filter: brightness(1.06);
}
.rp-chat__fab svg{ width: 26px; height: 26px; opacity: .95; }

/* Panel */
.rp-chat__panel{
  display: none;
  width: 100%;
  border-radius: var(--rp-radius);
  overflow: hidden;
  border: 1px solid var(--rp-stroke);
  box-shadow: var(--rp-shadow);

  background:
    radial-gradient(120% 120% at 10% 0%, rgba(255,209,102,.10), transparent 45%),
    radial-gradient(120% 120% at 90% 10%, rgba(110,168,255,.12), transparent 55%),
    linear-gradient(180deg, var(--rp-bg-1), var(--rp-bg-2));

  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

/* Header */
.rp-chat__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 12px;
  border-bottom: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(180deg, rgba(255,255,255,.06), transparent);
}
.rp-chat__title{
  display:flex;
  align-items:center;
  gap:10px;
  min-width: 0;
}
.rp-chat__avatar{
  width: 34px; height: 34px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.14);
  background:
    radial-gradient(120% 120% at 20% 20%, rgba(255,209,102,.30), transparent 55%),
    radial-gradient(120% 120% at 80% 20%, rgba(110,168,255,.28), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.12));
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.15);
}
.rp-chat__titleText{ min-width:0; }
.rp-chat__name{
  font-weight: 900;
  font-size: 14px;
  letter-spacing:.2px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.rp-chat__status{
  font-size: 12px;
  color: var(--rp-muted);
  display:flex;
  align-items:center;
  gap:6px;
}
.rp-chat__dot{
  width: 8px; height: 8px;
  border-radius: 999px;
  background: rgba(56, 189, 248, .95);
  box-shadow: 0 0 0 4px rgba(56,189,248,.10);
}

.rp-chat__actions{
  display:flex;
  align-items:center;
  gap:8px;
}
.rp-chat__iconBtn{
  width: 34px; height: 34px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color: var(--rp-text);
  cursor:pointer;
  display:grid;
  place-items:center;
  transition: transform .16s ease, background .16s ease, border-color .16s ease;
}
.rp-chat__iconBtn:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,.09);
  border-color: rgba(255,255,255,.18);
}
.rp-chat__iconBtn svg{ width: 18px; height: 18px; opacity: .92; }

/* Messages */
.rp-chat__body{
  height: 340px;
  padding: 12px;
  overflow:auto;
  scroll-behavior:smooth;
}
.rp-chat__msg{
  display:flex;
  margin: 10px 0;
  gap: 10px;
  align-items:flex-end;
}
.rp-chat__msg--bot{ justify-content:flex-start; }
.rp-chat__msg--me{ justify-content:flex-end; }

.rp-chat__bubble{
  max-width: 82%;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 10px 25px rgba(0,0,0,.20);
  line-height:1.35;
  font-size: 13.5px;
  white-space: pre-wrap;
  word-wrap: break-word;
}
.rp-chat__msg--bot .rp-chat__bubble{
  background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
  border-top-left-radius: 10px;
  color: rgba(255,255,255,.90);
}
.rp-chat__msg--me .rp-chat__bubble{
  background:
    radial-gradient(120% 120% at 15% 10%, rgba(255,209,102,.22), transparent 40%),
    radial-gradient(120% 120% at 90% 30%, rgba(110,168,255,.20), transparent 55%),
    linear-gradient(180deg, rgba(28, 60, 110, .55), rgba(12, 18, 34, .62));
  border-color: rgba(255,255,255,.14);
  border-top-right-radius: 10px;
  color: rgba(255,255,255,.92);
}
.rp-chat__meta{
  margin-top: 6px;
  font-size: 11px;
  color: rgba(255,255,255,.55);
}

/* Footer / composer */
.rp-chat__footer{
  padding: 10px;
  border-top: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(180deg, transparent, rgba(0,0,0,.18));
}
.rp-chat__composer{
  display:flex;
  align-items:center;
  gap: 8px;
  border-radius: var(--rp-radius2);
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  padding: 8px;
}
.rp-chat__input{
  flex:1;
  resize:none;
  border:none;
  outline:none;
  background: transparent;
  color: var(--rp-text);
  font-family: var(--rp-font);
  font-size: 13.5px;
  line-height: 1.35;
  height: 38px;
  max-height: 120px;
  padding: 6px 8px;
}
.rp-chat__input::placeholder{ color: rgba(255,255,255,.45); }

.rp-chat__send{
  width: 40px; height: 40px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.14);
  cursor:pointer;
  display:grid;
  place-items:center;
  box-shadow: 0 10px 22px rgba(0,0,0,.22);

  background:
    radial-gradient(120% 120% at 20% 20%, rgba(255,209,102,.30), transparent 55%),
    radial-gradient(120% 120% at 85% 25%, rgba(110,168,255,.26), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,.07), rgba(0,0,0,.10));

  transition: transform .16s ease, filter .16s ease;
  color: #0c1222;
}
.rp-chat__send:hover{
  transform: translateY(-1px);
  filter: brightness(1.08);
}
.rp-chat__send svg{ width: 18px; height: 18px; opacity: .9; }

/* Open state */
.rp-chat.rp-chat--open .rp-chat__panel{ display:block; }
.rp-chat.rp-chat--open .rp-chat__fab,
.rp-chat.rp-chat--open .rp-chat__badge{ display:none; }

/* Mobile */
@media (max-width: 420px){
  .rp-chat{ right: 12px; bottom: 12px; width: calc(100vw - 24px); }
  .rp-chat__body{ height: 44vh; }
}
